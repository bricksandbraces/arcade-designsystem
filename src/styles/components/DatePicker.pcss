@import "react-day-picker/lib/style.css";
@import "../prefix.pcss";
@import "../typography.pcss";
@import "../theme.pcss";

.$(prefix) {
  &--datepicker {
    position: absolute;
    z-index: 1000;
    left: 0;
    width: var(--size-container-08);
    transform: translateY(var(--size-spacing-03));
    transition: opacity var(--transition-app-01),
      transform var(--transition-app-01), visibility var(--transition-app-01);
    border: 0.0625rem solid var(--color-border);
    border-radius: var(--component-radius-default);
    background: var(--color-background);
    box-shadow: var(--component-shadow-default);

    &-light {
      border-color: var(--color-border-light);
      background: var(--color-background-light);

      &.DayPicker
        > .DayPicker-wrapper
        > .DayPicker-Months
        > .DayPicker-Month
        > .DayPicker-Weekdays
        > .DayPicker-WeekdaysRow {
        &::before {
          background-color: var(--color-border-light);
        }
      }

      &.$(prefix)--datepicker.DayPicker:not(.DayPicker--interactionDisabled)
        .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside) {
        &:hover {
          background-color: var(--color-hover-light);
        }

        &:active {
          background-color: var(--color-active-light);
        }
      }

      &.$(prefix)--datepicker > .DayPicker-wrapper > .DayPicker-NavBar {
        & > .DayPicker-NavButton {
          &:hover {
            background-color: var(--color-hover-light);
          }

          &:active {
            background-color: var(--color-active-light);
          }
        }
      }
    }

    &-hidden {
      visibility: hidden;
      transform: translateY(var(--size-spacing-02));
      opacity: 0;
    }

    &-container {
      display: inline-flex;
      position: relative;
    }

    &.DayPicker:not(.DayPicker--interactionDisabled)
      .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside) {
      &:hover {
        background-color: var(--color-hover);
      }

      &:active {
        background-color: var(--color-active);
      }
    }

    & > .DayPicker-wrapper {
      padding-bottom: 0;
      transition: border-color var(--transition-app-01);
      border: 0.0625rem solid transparent;
      border-radius: var(--component-radius-default);

      &:focus-visible {
        border-color: var(--color-focus);
        outline: 0;
      }

      & > .DayPicker-NavBar {
        display: inline-flex;
        position: absolute;
        right: 0;
        margin: var(--size-spacing-03);
        margin-top: 0.65rem;
        gap: var(--size-spacing-02);

        & > .DayPicker-NavButton {
          position: unset;
          z-index: 1;
          right: 0;
          width: var(--size-container-03);
          height: var(--size-container-03);
          margin-top: 0;
          margin-right: 0;
          transition: background-color var(--transition-app-01),
            border-color var(--transition-app-01);
          border: 0.0625rem solid transparent;
          border-radius: var(--component-radius-default);
          background-size: 50%;

          &:hover {
            opacity: unset;
            background-color: var(--color-hover);
          }

          &:active {
            opacity: unset;
            background-color: var(--color-active);
          }

          &:focus-visible {
            border-color: var(--color-focus);
            outline: 0;
          }

          &.DayPicker-NavButton--prev {
            background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJpY29uIGljb24tdGFibGVyIGljb24tdGFibGVyLWNoZXZyb24tbGVmdCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSIjZmZmIiBmaWxsPSJub25lIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogIDxwb2x5bGluZSBwb2ludHM9IjE1IDYgOSAxMiAxNSAxOCIgLz4KPC9zdmc+CgoK");
            background-position-x: 0.425rem;
          }

          &.DayPicker-NavButton--next {
            background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJpY29uIGljb24tdGFibGVyIGljb24tdGFibGVyLWNoZXZyb24tcmlnaHQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iI2ZmZiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICA8cG9seWxpbmUgcG9pbnRzPSI5IDYgMTUgMTIgOSAxOCIgLz4KPC9zdmc+CgoK");
            background-position-x: 0.5rem;
          }
        }
      }

      & > .DayPicker-Months {
        & > .DayPicker-Month {
          width: 100%;
          margin: var(--size-spacing-05);

          & > .DayPicker-Caption {
            @mixin type--headline-06;

            margin-bottom: var(--size-spacing-05);
            padding: 0 var(--size-spacing-01);

            & > div {
              font-size: unset;
              font-weight: unset;
            }
          }

          & > .DayPicker-Weekdays {
            display: unset;
            margin-top: 0;

            & > .DayPicker-WeekdaysRow {
              display: flex;
              position: relative;

              &::before {
                content: "";
                position: absolute;
                width: calc(100% + var(--size-spacing-05) * 2 - 0.125rem);
                height: 0.0625rem;
                transform: translateX(
                  calc(var(--size-spacing-05) * -1 + 0.0625rem)
                );
                background-color: var(--color-border);
              }

              & > .DayPicker-Weekday {
                display: flex;
                align-items: center;
                justify-content: center;
                width: var(--size-container-03);
                height: var(--size-container-03);
                margin-top: var(--size-spacing-03);
                margin-bottom: var(--size-spacing-03);
                padding: 0;
                color: var(--color-font-text-05);

                & > abbr {
                  @mixin type--body-02;
                }
              }
            }
          }

          & > .DayPicker-Body {
            & > .DayPicker-Week {
              display: flex;

              & > .DayPicker-Day {
                @mixin type--body-02;

                display: flex;
                align-items: center;
                justify-content: center;
                width: var(--size-container-03);
                height: var(--size-container-03);
                padding: 0;
                transition: background-color var(--transition-app-01),
                  border-color var(--transition-app-01);
                border: 0.0625rem solid transparent;
                border-radius: var(--component-radius-default);
                cursor: pointer;

                &:focus-visible {
                  border-color: var(--color-focus);
                  outline: 0;
                }
              }

              &
                > .DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside) {
                background-color: var(--color-decoration);
                color: var(--color-font-text-01);
              }

              & > .DayPicker-Day--outside {
                color: var(--color-font-text-05);
                cursor: unset;
              }

              & > .DayPicker-Day--today {
                color: var(--color-font-decoration);

                &::after {
                  content: "";
                  position: absolute;
                  width: calc(var(--size-container-01) / 4);
                  height: calc(var(--size-container-01) / 4);
                  transform: translateY(calc(var(--size-container-01) / 4 * 3));
                  border-radius: 50%;
                  background-color: currentColor;
                }
              }
            }
          }
        }
      }
    }
  }

  &--datepicker.$(prefix)--skeleton {
    display: inline-flex;
    position: unset;
    flex-flow: column;
    align-items: flex-start;
    overflow: unset;
    border-color: transparent;
    background-color: transparent;
    box-shadow: none;

    & > .$(prefix)--skeleton-animated {
      justify-content: flex-end;
      padding: 0 var(--size-spacing-05);
      border-radius: var(--component-radius-default);

      & > svg {
        transform: translateX(-0.0625rem);
        stroke: var(--color-skeleton-03);
      }
    }
  }
}
